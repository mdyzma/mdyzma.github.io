<!DOCTYPE html>
<html lang="en">

  <!-- Begin Jekyll SEO tag v2.2.0 -->
<title>Part 2: Setting up work environment | Consider Python</title>
<meta property="og:title" content="Part 2: Setting up work environment" />
<meta name="author" content="Michal Dyzma" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In Part 2 I will set up and show how to manage virtual environments in python. Initiate version control and software versioning automation. Additionally I will set up continuous integration service using GitLab, which will include automatic testing with pytest and documentation creation. Code will run tests every time update has been pushed to the master branch of the software repository." />
<meta property="og:description" content="In Part 2 I will set up and show how to manage virtual environments in python. Initiate version control and software versioning automation. Additionally I will set up continuous integration service using GitLab, which will include automatic testing with pytest and documentation creation. Code will run tests every time update has been pushed to the master branch of the software repository." />
<link rel="canonical" href="http://localhost:4000/2017/05/28/part2-biostudio-setting-up-environment/" />
<meta property="og:url" content="http://localhost:4000/2017/05/28/part2-biostudio-setting-up-environment/" />
<meta property="og:site_name" content="Consider Python" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-05-28T03:15:08+02:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@MichalDyzma" />
<meta name="twitter:creator" content="@Michal Dyzma" />
<meta property="fb:admins" content="mdyzma" />
<meta property="article:publisher" content="mdyzma" />
<meta property="fb:app_id" content="422251294815916" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Part 2: Setting up work environment",
"author": {"@type": "Person",
"name": "Michal Dyzma"},
"datePublished": "2017-05-28T03:15:08+02:00",
"description": "In Part 2 I will set up and show how to manage virtual environments in python. Initiate version control and software versioning automation. Additionally I will set up continuous integration service using GitLab, which will include automatic testing with pytest and documentation creation. Code will run tests every time update has been pushed to the master branch of the software repository.",
"publisher": {"@type": "Organization",
"name": "Michal Dyzma",
"logo": {"@type": "ImageObject",
"url": "http://localhost:4000/assets/md-logo.png"}},
"mainEntityOfPage": {"@type": "WebPage",
"@id": "http://localhost:4000/2017/05/28/part2-biostudio-setting-up-environment/"},
"url": "http://localhost:4000/2017/05/28/part2-biostudio-setting-up-environment/"}</script>
<!-- End Jekyll SEO tag -->

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Part 2: Setting up work environment</title>
  <meta name="description" content="In Part 2 I will set up and show how to manage virtual environments in python. Initiate version control and software versioning automation. Additionally I will set up continuous integration service using GitLab, which will include automatic testing with pytest and documentation creation. Code will run tests every time update has been pushed to the master branch of the software repository.">
  <meta name="keywords" content="biostudio, workflow, python, GitLab">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2017/05/28/part2-biostudio-setting-up-environment/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Consider Python" href="http://localhost:4000/feed.xml">

  

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="MichalDyzma">
  <meta name="twitter:title" content="Part 2: Setting up work environment">
  <meta name="twitter:description" content="In Part 2 I will set up and show how to manage virtual environments in python. Initiate version control and software versioning automation. Additionally I will set up continuous integration service...">
  
    <meta name="twitter:creator" content="MichalDyzma">
  
  

  <script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 'Bitter:400,700,400italic:latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

<!-- Font awesome -->
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-97434888-1', 'auto');
    ga('send', 'pageview');

  </script>


  
  <!-- Google Adsense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: ca-pub-4566255347044004,
    enable_page_level_ads: true
  });
</script>


</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Consider Python</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/">Home</a>
      
        
        <a class="page-link" href="/archives/">Archives</a>
      
        
        <a class="page-link" href="/about/">About</a>
      
        
        <a class="page-link" href="https://github.com/mdyzma/mdyzma.github.io">GitHub</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Part 2: Setting up work environment</h1>
    
    <p class="post-meta"><time datetime="2017-05-28T03:15:08+02:00" itemprop="datePublished">May 28, 2017</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Michal Dyzma</span></span> • 
  
  
    
      <a href="/categories/biostudio/">biostudio</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/workflow/">workflow</a>,
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
      <a href="/categories/python/">python</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/gitlab/">GitLab</a>
    
  
    
  
    
  

</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>In <strong>Part 2</strong> I will set up and show how to manage virtual environments in python. Initiate version control and software versioning automation. Additionally I will set up continuous integration service using GitLab, which will include automatic testing with pytest and documentation creation. Code will run tests every time update has been pushed to the master branch of the software repository.</p>

<hr />

<h4 id="about-biostudio-project">About biostudio project</h4>

<p>This is part of  what should develop to a series of articles on development process of <em>Biostudio</em> - python GUI app. I will include best practices and solutions used in corporate projects. From preparing  software specifications to fully functional software deployed to the PyPI repository. Final product will be GUI application for Protein Data Bank <code class="highlighter-rouge">.pdb</code> files editor, which carry information about 3D structure of biological macro-molecules.</p>

<p><em>Series consists of:</em></p>

<ul>
  <li><a href="http://localhost:4000/2017/03/26/part1-biostudio-application-design/">Part 1: Application designs</a></li>
  <li><a href="http://localhost:4000/2017/05/28/part2-biostudio-setting-up-environment/">Part 2: Setting up work environment</a></li>
  <li><a href="http://localhost:4000/2017/06/24/part3-biostudio-automate-everything/">Part 3: Automate everything</a></li>
</ul>

<!-- 
* [Part 4: Low Level Design implementation](http://localhost:4000/2017/04/15/part4-biostudio-design-implementation-continue/)
* [Part 5: Debugging and profiling](http://localhost:4000/2017/04/16/part5-biostudio-debugging-and-profiling/)
* [Part 6: Application deployment](http://localhost:4000/2017/04/17/part6-biostudio-application-deployment/)
* [Part 7: Application life cycle](http://localhost:4000/2017/04/18/part7-biostudio-application-lifecycle/)
* [Part 8: Code metrics](http://localhost:4000/2017/04/19/part8-biostudio-code-metrics/)
 -->

<h4 id="basic-configuration">Basic configuration</h4>

<table>
  <tbody>
    <tr>
      <td>Platform</td>
      <td> </td>
      <td><strong>Linux 64 bit</strong> (Fedora or Ubuntu)</td>
    </tr>
    <tr>
      <td>Python</td>
      <td> </td>
      <td><strong>3.6.1</strong></td>
    </tr>
    <tr>
      <td>Source</td>
      <td> </td>
      <td><a href="https://gitlab.com/mdyzma/biostudio">link</a></td>
    </tr>
  </tbody>
</table>

<p><br /></p>
<div class="alert alert-info" role="alert" style="text-align: justify; vertical-align:middle;">
I will run the code using docker virtualization technology or spin new VirtualBox of Fedora or Ubuntu, to test how it works freshly out of the box. So I can be sure every piece of code was properly tested. Outputs from my tests will be pasted here, unless they are ridiculous long (hundreds of lines). Then I will truncate output to the bare minimum necessary to understand what is going on.
</div>

<hr />

<h2 id="virtual-environment">Virtual environment</h2>

<p>Before I start to write the code I will set up clean environment with Python interpreter. It is a common practice to start new projects with their own Python and packages in a sandbox. Environments are created by <code class="highlighter-rouge">virtualenv</code> package. It will automatically match main system interpreter found on system path, but it is possible to specify other version as well. To do that one has to specify <code class="highlighter-rouge">--python</code> flag and point to the executable of specific python version installed in the system. It is also good to separate program code and virtual environment own directory. The later may grow quite big and it makes no sens to keep all python packages, used during development, under our own project version control. Virtual environment may be anywhere on the disc and what I usually do is to create <code class="highlighter-rouge">.envs</code> folder in home directory and group all environments over there.</p>

<p>Call <code class="highlighter-rouge">virtualenv</code> and specify Python interpreter using <code class="highlighter-rouge">--python=/path/to/your/python</code>. I do not do this, because I use default Python present in the system:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">mdyzma@devbox:~/.envs$ </span>virtualenv biostudio <span class="c"># optionally --python=path/to/other/python/interpreter/python</span>
    
Using base prefix <span class="s1">'/home/mdyzma/anaconda3'</span>
New python executable <span class="k">in</span> /home/mdyzma/.envs/biostudio/bin/python
copying /home/mdyzma/anaconda3/bin/python <span class="o">=</span>&gt; /home/mdyzma/.envs/biostudio/bin/python
Installing setuptools, pip, wheel...done.</code></pre></figure>

<p>All basic tools, which allow packages control (install, remove, update and create), were installed automatically. To start work in new environment, I need to activate it:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">mdyzma@devbox:~/.envs$ </span><span class="nb">source </span>activate biostudio
<span class="c">#list packages in new environment</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/.envs<span class="nv">$ </span>pip list
appdirs <span class="o">(</span>1.4.3<span class="o">)</span>
packaging <span class="o">(</span>16.8<span class="o">)</span>
pip <span class="o">(</span>9.0.1<span class="o">)</span>
pyparsing <span class="o">(</span>2.2.0<span class="o">)</span>
setuptools <span class="o">(</span>35.0.2<span class="o">)</span>
six <span class="o">(</span>1.10.0<span class="o">)</span>
wheel <span class="o">(</span>0.29.0<span class="o">)</span></code></pre></figure>

<p>Now I can install a different Python packages into specific virtualenv, eliminating the conflict with system Python. It is time to create basic development infrastructure.</p>

<ul>
  <li><strong>Folders &amp; files</strong></li>
  <li><strong>Dependencies</strong>:
    <ul>
      <li><strong>coverage</strong> - <em>tests coverage metrics</em></li>
      <li><strong>Sphinx</strong> - <em>documentation</em></li>
      <li><strong>sphinx-autobuild</strong> - <em>running docs live preview</em></li>
      <li><strong>numpydoc</strong> - <em>convenient docstring style</em></li>
      <li><strong>bumpversion</strong> - <em>control software version</em></li>
      <li><strong>pylint</strong> - <em>code metrics and PEP8 coding standards</em></li>
      <li><strong>pytest</strong> and plug-ins - <em>unit tests</em>:
        <ul>
          <li><strong>pytest-runner</strong></li>
          <li><strong>pytest-cov</strong></li>
        </ul>
      </li>
      <li><strong>tox</strong> - <em>generic virtualenv manager</em></li>
    </ul>
  </li>
</ul>

<h4 id="folders-and-files">Folders and files</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/.envs<span class="nv">$ </span><span class="nb">cd</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~<span class="nv">$ </span>mkdir -p biostudio/<span class="o">{</span>docs,src/<span class="o">{</span>common,fileandler/pdb,functional<span class="o">}</span>,tests/<span class="o">{</span>common,filehandler/pdb,functional<span class="o">}</span>,uml<span class="o">}</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~<span class="nv">$ </span><span class="nb">cd </span>biostudio/ <span class="o">&amp;&amp;</span>  touch README.md LICENSE setup.py setup.cfg tox.ini
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~<span class="nv">$ </span>find src -type d -exec touch <span class="o">{}</span>/__init__.py <span class="se">\;</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~<span class="nv">$ </span>find tests -type d -exec touch <span class="o">{}</span>/.gitkeep <span class="se">\;</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~<span class="nv">$tree</span> biostudio

biostudio/
├── docs
├── src
│   ├── common
│   ├── filehandler
│   │   └── pdb
│   └── functional
├── tests
│   ├── common
│   ├── filehandler
│   │   └── pdb
│   └── functional
└── uml

12 directories, 0 files</code></pre></figure>

<p>Tests folder resembles structure of <code class="highlighter-rouge">src/</code>, which is advised way to write unit tests and separate test files from the source.
I will add few necessary files to the main folder, which will help to keep things organized and ship it later to the PyPI repo:</p>

<ul>
  <li><code class="highlighter-rouge">README.md</code></li>
  <li><code class="highlighter-rouge">LICENSE</code></li>
  <li><code class="highlighter-rouge">MANIFEST.in</code></li>
  <li><code class="highlighter-rouge">setup.py</code></li>
  <li><code class="highlighter-rouge">setup.cfg</code></li>
  <li><code class="highlighter-rouge">tox.ini</code></li>
</ul>

<p>… and <code class="highlighter-rouge">__init__.py</code> files in each sub-folders of <code class="highlighter-rouge">src/</code> to make python packages out of them. Later more configuration files will be added, to govern some automation pipelines. I also added <code class="highlighter-rouge">.gitkeep</code> hidden files to each empty directory, so Git will not ignore them when I push initial folder structure to version control. Later <code class="highlighter-rouge">.gitkeep</code> will be deleted or appended to <code class="highlighter-rouge">.gitignore</code> file to make them “invisible” (see: <a href="#vcs">here</a>) once folders are no longer empty, they will be included as a part of my “push” to the version control system.</p>

<p>Finally skeleton of <code class="highlighter-rouge">biostudio</code> project is as follows:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~<span class="nv">$tree</span> biostudio
biostudio/
│   LICENSE
│   MANIFEST.in
│   README.md
│   setup.cfg
│   setup.py
│   tox.ini
│
├───docs
├───src
│   │   biostudio.py
│   │   __init__.py
│   │
│   ├───common
│   │       __init__.py
│   │
│   ├───filehandler
│   │   │   __init__.py
│   │   │
│   │   └───pdb
│   │           __init__.py
│   │
│   └───functional
│           __init__.py
│
├───tests
│   │   test_biostudio.py
│   │
│   ├───common
│   ├───filehandler
│   │   └───pdb
│   └───functional
└───uml
<span class="c"># this listing does not show .gitkeep files, which are irrelevant for python app</span></code></pre></figure>

<p>If you work on legacy project entire structure will be given to you and all this can be substituted with simple <code class="highlighter-rouge">git clone</code> statement. For <em>Biostudio</em> it might look like this:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git clone git@gitlab.com:mdyzma/biostudio.git </code></pre></figure>

<p>For more details about remote repository and its access see [this section][#remote]</p>

<h4 id="dependencies-with-pip-and-requirementstxt">Dependencies with pip and requirements.txt</h4>

<p>It’s easy to get a Python project off the ground simply by using pip to install dependent packages as you go. This works fine as long as you’re the only one working on the project. As soon as someone else wants to run your code, they’ll need to go through the process of figuring which dependencies the project needs and installing them all by hand. It is problem prone and can lead to some very hard to spot program misbehavior. To prevent this, I will define a <code class="highlighter-rouge">requirements.txt</code> file that stores all of my project’s dependencies. My current requirements file looks like this:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># requiremnts.txt</span>
Sphinx
sphinx-autobuild
numpydoc
bumpversion
coverage
pytest
pytest-runner
pytest-cov
tox</code></pre></figure>

<p>I do not include packages versions, therefore latest will be downloaded and installed by pip (including their dependencies).</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~<span class="nv">$ </span>pip install -r requirements.txt</code></pre></figure>

<p>It may take some time, since pip manages all the dependencies for each package and their dependencies as well. As I mentioned before, it was not necessary to specify version for every package. Pip downloaded latest available from PyPI. In new projects, created from the scratch it may work, but only in initial stages of project development. When dealing with legacy code, one  have to put more constrains and specify versions for each package, so that there would be no ambiguity and development environment will reflect exactly the one used during program creation, or specified in the SDD. Now I will create such file for future me or other dev team:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~<span class="nv">$ </span>pip freeze &gt; requirements.txt
<span class="c"># Listing created file</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>cat requirements.txt 
<span class="nv">alabaster</span><span class="o">==</span>0.7.10
<span class="nv">appdirs</span><span class="o">==</span>1.4.3
<span class="nv">argh</span><span class="o">==</span>0.26.2
<span class="nv">astroid</span><span class="o">==</span>1.5.2
<span class="nv">Babel</span><span class="o">==</span>2.4.0
<span class="nv">bumpversion</span><span class="o">==</span>0.5.3
<span class="nv">certifi</span><span class="o">==</span>2017.4.17
<span class="nv">chardet</span><span class="o">==</span>3.0.3
<span class="nv">coverage</span><span class="o">==</span>4.4.1
<span class="nv">docutils</span><span class="o">==</span>0.13.1
<span class="nv">idna</span><span class="o">==</span>2.5
<span class="nv">imagesize</span><span class="o">==</span>0.7.1
<span class="nv">isort</span><span class="o">==</span>4.2.5
<span class="nv">Jinja2</span><span class="o">==</span>2.9.6
lazy-object-proxy<span class="o">==</span>1.3.1
<span class="nv">livereload</span><span class="o">==</span>2.5.1
<span class="nv">MarkupSafe</span><span class="o">==</span>1.0
<span class="nv">mccabe</span><span class="o">==</span>0.6.1
<span class="nv">numpydoc</span><span class="o">==</span>0.6.0
<span class="nv">packaging</span><span class="o">==</span>16.8
<span class="nv">pathtools</span><span class="o">==</span>0.1.2
<span class="nv">pluggy</span><span class="o">==</span>0.4.0
port-for<span class="o">==</span>0.3.1
<span class="nv">py</span><span class="o">==</span>1.4.33
<span class="nv">Pygments</span><span class="o">==</span>2.2.0
<span class="nv">pylint</span><span class="o">==</span>1.7.1
<span class="nv">pyparsing</span><span class="o">==</span>2.2.0
<span class="nv">pytest</span><span class="o">==</span>3.1.0
pytest-cov<span class="o">==</span>2.5.1
pytest-runner<span class="o">==</span>2.11.1
<span class="nv">pytz</span><span class="o">==</span>2017.2
<span class="nv">PyYAML</span><span class="o">==</span>3.12
<span class="nv">requests</span><span class="o">==</span>2.16.0
<span class="nv">six</span><span class="o">==</span>1.10.0
<span class="nv">snowballstemmer</span><span class="o">==</span>1.2.1
<span class="nv">Sphinx</span><span class="o">==</span>1.6.1
sphinx-autobuild<span class="o">==</span>0.6.0
sphinxcontrib-websupport<span class="o">==</span>1.0.1
<span class="nv">tornado</span><span class="o">==</span>4.5.1
<span class="nv">tox</span><span class="o">==</span>2.7.0
<span class="nv">typing</span><span class="o">==</span>3.6.1
<span class="nv">urllib3</span><span class="o">==</span>1.21.1
<span class="nv">virtualenv</span><span class="o">==</span>15.1.0
<span class="nv">watchdog</span><span class="o">==</span>0.8.3
<span class="nv">wrapt</span><span class="o">==</span>1.10.10</code></pre></figure>

<div class="alert alert-info" role="alert" style="text-align: justify; vertical-align:middle;">
To reduce memory usage it is possible to add <code class="highlighter-rouge">--no-cache-dir</code> flag during dependencies installation. This way pip will not store downloaded packages in local cache directory for future use.
</div>

<p>Lots of this packages are dependencies from the first list of requirements. This list does not contain all packages from environment, some of them are by default present in the system, therefore were not included in freeze. I could delete all other and leave only few initial, which will install their own dependencies anyway, but it would be a lot of unnecessary work. Simply typing <code class="highlighter-rouge">pip freeze</code> is all I need to create list of dependencies for my project. Less work, the better.</p>

<p>For more on pip requirements refer to this pep documentation <a href="https://pip.pypa.io/en/stable/user_guide/#requirements-files">section</a>.</p>

<h2 id="documentation">Documentation</h2>

<p>Another vital aspect of application development is documentation. There are three levels of documentation I will write:</p>

<ul>
  <li>project- or distribution-level documentation</li>
  <li>API documentation</li>
  <li>code comments</li>
</ul>

<p>First one is usually written separately from the code (in <code class="highlighter-rouge">docs/</code>). It is intended to give high-level information on a project, such as installation instructions, examples, and so on. The second,  API-level documentation, summarizes how functions, methods, classes, or modules should be used. It is usually prepared along with the code using Python docstrings. The third level of documentation is in the form of code comments. Such comments help explain how a piece of code works. In this part I will focus on automation of tedious process of <strong>project documentation</strong> and <strong>API documentation</strong> production. This usually goes to the client. Comments are vital part of the project, but I usually treat them as “internal use only”. Unless I publish source as well, as in case of this open-source project.</p>

<h4 id="sphinx">Sphinx</h4>

<p>I am using Sphinx package to create quality documentation, based on easy to write markup language called <em>reStructuredText</em>. <code class="highlighter-rouge">.rst</code> files will be used to create static website documentation (the same way this blog is created with ruby and jekyll and posts written in markdown). To start documentation I need to run Sphinx creator, which will guide me through setup process:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:/docs<span class="nv">$ </span>sphinx-quickstart

<span class="gp">&gt; </span>sphinx-quickstart
Welcome to the Sphinx 1.5.1 quickstart utility.

Please enter values <span class="k">for </span>the following settings <span class="o">(</span>just press Enter to
accept a default value, <span class="k">if </span>one is given <span class="k">in </span>brackets<span class="o">)</span>.

Enter the root path <span class="k">for </span>documentation.
<span class="gp">&gt; </span>Root path <span class="k">for </span>the documentation <span class="o">[</span>.]:

You have two options <span class="k">for </span>placing the build directory <span class="k">for </span>Sphinx output.
Either, you use a directory <span class="s2">"_build"</span> within the root path, or you separate
<span class="s2">"source"</span> and <span class="s2">"build"</span> directories within the root path.
<span class="gp">&gt; </span>Separate <span class="nb">source </span>and build directories <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]: y

Inside the root directory, two more directories will be created; <span class="s2">"_templates"</span>
<span class="k">for </span>custom HTML templates and <span class="s2">"_static"</span> <span class="k">for </span>custom stylesheets and other static
files. You can enter another prefix <span class="o">(</span>such as <span class="s2">"."</span><span class="o">)</span> to replace the underscore.
<span class="gp">&gt; </span>Name prefix <span class="k">for </span>templates and static dir <span class="o">[</span>_]:

The project name will occur <span class="k">in </span>several places <span class="k">in </span>the built documentation.
<span class="gp">&gt; </span>Project name: biostudio
<span class="gp">&gt; </span>Author name<span class="o">(</span>s<span class="o">)</span>: Michal Dyzma

Sphinx has the notion of a <span class="s2">"version"</span> and a <span class="s2">"release"</span> <span class="k">for </span>the
software. Each version can have multiple releases. For example, <span class="k">for
</span>Python the version is something like 2.5 or 3.0, <span class="k">while </span>the release is
something like 2.5.1 or 3.0a1.  If you dont need this dual structure,
just <span class="nb">set </span>both to the same value.
<span class="gp">&gt; </span>Project version <span class="o">[]</span>: 0.0.0
<span class="gp">&gt; </span>Project release <span class="o">[</span>0.0.0]:

If the documents are to be written <span class="k">in </span>a language other than English,
you can <span class="k">select </span>a language here by its language code. Sphinx will <span class="k">then
</span>translate text that it generates into that language.

For a list of supported codes, see
http://sphinx-doc.org/config.html#confval-language.
<span class="gp">&gt; </span>Project language <span class="o">[</span>en]:

The file name suffix <span class="k">for </span><span class="nb">source </span>files. Commonly, this is either <span class="s2">".txt"</span>
or <span class="s2">".rst"</span>.  Only files with this suffix are considered documents.
<span class="gp">&gt; </span>Source file suffix <span class="o">[</span>.rst]:

One document is special <span class="k">in </span>that it is considered the top node of the
<span class="s2">"contents tree"</span>, that is, it is the root of the hierarchical structure
of the documents. Normally, this is <span class="s2">"index"</span>, but <span class="k">if </span>your <span class="s2">"index"</span>
document is a custom template, you can also <span class="nb">set </span>this to another filename.
<span class="gp">&gt; </span>Name of your master document <span class="o">(</span>without suffix<span class="o">)</span> <span class="o">[</span>index]:

Sphinx can also add configuration <span class="k">for </span>epub output:
<span class="gp">&gt; </span>Do you want to use the epub builder <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:

Please indicate <span class="k">if </span>you want to use one of the following Sphinx extensions:
<span class="gp">&gt; </span>autodoc: automatically insert docstrings from modules <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]: y
<span class="gp">&gt; </span>doctest: automatically <span class="nb">test </span>code snippets <span class="k">in </span>doctest blocks <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:
<span class="gp">&gt; </span>intersphinx: link between Sphinx documentation of different projects <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:
<span class="gp">&gt; </span>todo: write <span class="s2">"todo"</span> entries that can be shown or hidden on build <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:
<span class="gp">&gt; </span>coverage: checks <span class="k">for </span>documentation coverage <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:
<span class="gp">&gt; </span>imgmath: include math, rendered as PNG or SVG images <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:
<span class="gp">&gt; </span>mathjax: include math, rendered <span class="k">in </span>the browser by MathJax <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]: y
<span class="gp">&gt; </span>ifconfig: conditional inclusion of content based on config values <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:
<span class="gp">&gt; </span>viewcode: include links to the <span class="nb">source </span>code of documented Python objects <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:
<span class="gp">&gt; </span>githubpages: create .nojekyll file to publish the document on GitHub pages <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>n]:

A Makefile and a Windows <span class="nb">command </span>file can be generated <span class="k">for </span>you so that you
only have to run e.g. make html instead of invoking sphinx-build
directly.
<span class="gp">&gt; </span>Create Makefile? <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>y]:
<span class="gp">&gt; </span>Create Windows <span class="nb">command </span>file? <span class="o">(</span>y/n<span class="o">)</span> <span class="o">[</span>y]:

Creating file ./source/conf.py.
Creating file ./source/index.rst.
Creating file ./Makefile.
Creating file ./make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file ./source/index.rst and create other documentation
<span class="nb">source </span>files. Use the Makefile to build the docs, like so:
   make builder
where <span class="s2">"builder"</span> is one of the supported builders, e.g. html, latex or linkcheck.</code></pre></figure>

<p>All settings were stored in <code class="highlighter-rouge">docs/source/conf.py</code>. Basic setup is not enough for me. I will modify <code class="highlighter-rouge">conf.py</code> and adjust it to the style I usually use when I am writing docstrings. To generate full actual version of documentation I run makefile generated for me by creator:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:/docs<span class="nv">$ </span>make html

Running Sphinx v1.5.1
making output directory...
loading pickled environment... not yet created
building <span class="o">[</span>mo]: targets <span class="k">for </span>0 po files that are out of date
building <span class="o">[</span>html]: targets <span class="k">for </span>11 <span class="nb">source </span>files that are out of date
updating environment: 11 added, 0 changed, 0 removed
reading sources... <span class="o">[</span>100%] links
looking <span class="k">for </span>now-outdated files... none found
pickling environment... <span class="k">done
</span>checking consistency... <span class="k">done
</span>preparing documents... <span class="k">done
</span>writing output... <span class="o">[</span>100%] links
generating indices... genindex
writing additional pages... search
copying static files... <span class="k">done
</span>copying extra files... <span class="k">done
</span>dumping search index <span class="k">in </span>English <span class="o">(</span>code: en<span class="o">)</span> ... <span class="k">done
</span>dumping object inventory... <span class="k">done
</span>build succeeded.

Build finished. The HTML pages are <span class="k">in </span>build/html.</code></pre></figure>

<h2 id="software-versioning">Software versioning</h2>

<p>In many projects control over software version is done by hand. There is no need to say that there must be a better way. Book keeping is tedious and error prone, especially in teams with more than one person. Here I will use <a href="https://pypi.python.org/pypi/bumpversion">bumpversion</a> package to control software version through out the project files. Also I will use semantic versioning scheme, which  is a recommended versioning convention. The release is represented by three numbers: MAJOR.MINOR.PATCH. The MAJOR number changes with introducing changes to the API, which are not backward compatible. MInor represents some new functionalities, but compatibility is kept. PATCH is incremented, when some bugs are fixed. There is very specific description of versioning and dependency specification in <a href="https://www.python.org/dev/peps/pep-0440/">PEP 440</a> Bumpversion uses <code class="highlighter-rouge">setup.cfg</code> file to keep track of places in the code, where it must be incremented when I change package version.</p>

<p>Example of bumpversion configuration:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># setup.cfg file</span>
<span class="o">[</span>bumpversion]
current_version <span class="o">=</span> 0.0.0
commit <span class="o">=</span> True
tag <span class="o">=</span> True

<span class="o">[</span>bumpversion:file:setup.py]
search <span class="o">=</span> <span class="nv">version</span><span class="o">=</span><span class="s1">'{current_version}'</span>
replace <span class="o">=</span> <span class="nv">version</span><span class="o">=</span><span class="s1">'{new_version}'</span>

<span class="o">[</span>bumpversion:file:biostudio/__init__.py]
search <span class="o">=</span> __version__ <span class="o">=</span> <span class="s1">'{current_version}'</span>
replace <span class="o">=</span> __version__ <span class="o">=</span> <span class="s1">'{new_version}'</span></code></pre></figure>

<p>It will search for sepcific phrases in indicated files and change them automatically and commit code to the version control system. To increment version I have to commit all changes and type:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>bumpversion patch <span class="c">#or minor / major </span></code></pre></figure>

<p>Comment for commit or tag can be added. See <a href="https://pypi.python.org/pypi/bumpversion">bumpversion documentation</a> for details</p>

<p><a name="vcs"></a></p>

<h2 id="code-management-vcs">Code management (VCS)</h2>

<p>having basic folder structure, documentation and few other aspects done, it is time to submit code to version control system (VCS). In this project I will use git.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git init

Initialized empty Git repository <span class="k">in</span> /home/mdyzma/biostudio/.git/
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$git</span> status
On branch master

Initial commit

Untracked files:
  <span class="o">(</span>use <span class="s2">"git add &lt;file&gt;..."</span> to include <span class="k">in </span>what will be committed<span class="o">)</span>

        .gitignore
        LICENSE
        MANIFEST.in
        README.md
        docs/
        setup.cfg
        setup.py
        src/
        tests/
        toc.ini
        uml/

nothing added to commit but untracked files present <span class="o">(</span>use <span class="s2">"git add"</span> to track<span class="o">)</span></code></pre></figure>

<p>I will do as mighty git says:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git add .
<span class="c"># ... and check status again</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git status
On branch master

Initial commit

Changes to be committed:
  <span class="o">(</span>use <span class="s2">"git rm --cached &lt;file&gt;..."</span> to unstage<span class="o">)</span>

        new file:   .gitignore
        new file:   LICENSE
        new file:   MANIFEST.in
        new file:   README.md
        new file:   docs/Makefile
        new file:   docs/make.bat
        new file:   docs/source/_static/.gitkeep
        new file:   docs/source/_templates/.gitkeep
        new file:   docs/source/conf.py
        new file:   docs/source/index.rst
        new file:   setup.cfg
        new file:   setup.py
        new file:   src/__init__.py
        new file:   src/biostudio.py
        new file:   src/common/__init__.py
        new file:   src/filehandler/__init__.py
        new file:   src/filehandler/pdb/__init__.py
        new file:   src/functional/__init__.py
        new file:   tests/common/.gitkeep
        new file:   tests/filehandler/.gitkeep
        new file:   tests/functional/.gitkeep
        new file:   tests/test_biostudio.py
        new file:   toc.ini
        new file:   uml/.gitkeep</code></pre></figure>

<p>All changes were staged for commit. I will commit this and tag as <code class="highlighter-rouge">v0.0.0</code> - my very initial version of <em>Biostudio</em>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git commit -m <span class="s2">"Initial structure for biostudio"</span>
<span class="o">[</span>master <span class="o">(</span>root-commit<span class="o">)</span> 49cf9ed] Initial structure <span class="k">for </span>biostudio
 24 files changed, 392 insertions<span class="o">(</span>+<span class="o">)</span>
 create mode 100644 .gitignore
 create mode 100644 LICENSE
 create mode 100644 MANIFEST.in
 create mode 100644 README.md
 create mode 100644 docs/Makefile
 create mode 100644 docs/make.bat
 create mode 100644 docs/source/_static/.gitkeep
 create mode 100644 docs/source/_templates/.gitkeep
 create mode 100644 docs/source/conf.py
 create mode 100644 docs/source/index.rst
 create mode 100644 setup.cfg
 create mode 100644 setup.py
 create mode 100644 src/__init__.py
 create mode 100644 src/biostudio.py
 create mode 100644 src/common/__init__.py
 create mode 100644 src/filehandler/__init__.py
 create mode 100644 src/filehandler/pdb/__init__.py
 create mode 100644 src/functional/__init__.py
 create mode 100644 tests/common/.gitkeep
 create mode 100644 tests/filehandler/.gitkeep
 create mode 100644 tests/functional/.gitkeep
 create mode 100644 tests/test_biostudio.py
 create mode 100644 toc.ini
 create mode 100644 uml/.gitkeep
 create mode 100644 uml/class.puml
<span class="c"># ... and add tag</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git tag -a v0.0.0 -m <span class="s2">"Version 0: File&amp;folder structure"</span>
On branch master</code></pre></figure>

<p>Now if I check git status it will say:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git status
On branch master
nothing to commit, working tree clean
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git tag
v0.0.0
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git log
commit 49cf9ed6f9d0ca7356ebc134f79cc1672fa3df73
Author: Michal Dyzma &lt;mdyzma@gmail.com&gt;
Date:   Sun May 28 09:59:03 2017 +0200

    Initial structure <span class="k">for </span>biostudio</code></pre></figure>

<p>All worked and files under git version control. Any change to source files will be tracked and may be saved.</p>

<h4 id="gitignore">Gitignore</h4>

<p>I added <code class="highlighter-rouge">.gitignore</code> file, where I will put all files or folders I do not want to be included in my projects VCS. In fact I use my IDE plug-in to create it for me, with python specific entries added automatically. Currently almost every popular text editors or IDEs have this functionality.</p>

<p><a name="remote"></a></p>

<h4 id="remote-repository">Remote repository</h4>

<p>I intend to keep project on GitLab server, but it is possible to create local repositories with <code class="highlighter-rouge">git init --bare</code>. This kind of directory is used to clone/pull and push changes and is located locally on users system file. GitLab also allows to use its community version for free and set up own GitLab server. I described this process in <a href="http://localhost:4000/2017/04/15/part4-biostudio-design-implementation-continue/">separate blog post</a>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># adding remote repository named origin</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git remote add origin git@gitlab.com:mdyzma/biostudio.git

<span class="c"># push local changes from master branch to remote origin repository (automatically named origin/master)</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git push -u origin master
git push -u origin master
Enter passphrase <span class="k">for </span>key <span class="s1">'/c/Users/Michal/.ssh/id_rsa'</span>: <span class="c"># I use ssh authentication token</span>
Counting objects: 19, <span class="k">done</span>.
Delta compression using up to 4 threads.
Compressing objects: 100% <span class="o">(</span>15/15<span class="o">)</span>, <span class="k">done</span>.
Writing objects: 100% <span class="o">(</span>19/19<span class="o">)</span>, 5.58 KiB | 0 bytes/s, <span class="k">done</span>.
Total 19 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
To gitlab.com:mdyzma/biostudio.git
 <span class="k">*</span> <span class="o">[</span>new branch]      master -&gt; master
Branch master <span class="nb">set </span>up to track remote branch master from origin.

<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>git push -u origin --tags
Enter passphrase <span class="k">for </span>key <span class="s1">'/c/Users/Michal/.ssh/id_rsa'</span>:
Counting objects: 1, <span class="k">done</span>.
Writing objects: 100% <span class="o">(</span>1/1<span class="o">)</span>, 182 bytes | 0 bytes/s, <span class="k">done</span>.
Total 1 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
To gitlab.com:mdyzma/biostudio.git
 <span class="k">*</span> <span class="o">[</span>new tag]         v0.0.0 -&gt; v0.0.0</code></pre></figure>

<h4 id="ssh-authentication">SSH Authentication</h4>

<p>I mentioned I use SSH authentication token.</p>

<h2 id="unit-tests">Unit tests</h2>

<p>Application is developed using Test Driven Development (TDD) approach. Tests are grouped in package level folder <code class="highlighter-rouge">tests/</code> and mimics the <code class="highlighter-rouge">src/</code> folder structure. Tests use <code class="highlighter-rouge">pytest</code> module. To run entire suite use:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>pytest</code></pre></figure>

<h4 id="coverage">Coverage</h4>

<p>Since development employs TDD, test coverage should be high, but this kind of analysis may give some additional insight and help in creating more complete test suit. Coverage will report how ,much code is covered by the unit tests. To get nice html report I use:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>pytest --cov<span class="o">=</span>src tests/</code></pre></figure>

<p>Writing unit tests will be described in <a href="http://localhost:4000/2017/04/14/part3-biostudio-design-implementation-tdd/">Part 3: Test Driven Development</a></p>

<h2 id="code-analysis">Code analysis</h2>

<p>Many IDEs come well equipped with code inspection and reformatting tools, bu there are also separate python packages, which will work in terminal and generate text or html reports on quality of the code (mostly Python style guide <a href="https://pypi.python.org/pypi/pep8">PEP8</a> compliment and syntax errors).</p>

<h4 id="pylint">pylint</h4>

<p>Pylint is a tool that inspects the code for errors and also warns you about coding standard violations. It is integrated with most of currently used IDEs either as a part of the software or available as a plugin. It can be used as a command-line tool as well.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>pylint src
<span class="c">#or</span>
<span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>pylint --output-format<span class="o">=</span>html src &gt; pylint_report.html</code></pre></figure>

<h2 id="packaging">Packaging</h2>

<p>Hearth of the packaging is in <code class="highlighter-rouge">setup.py</code> and <code class="highlighter-rouge">setup.cfg</code> files. It contains all info regarding application like name, version, install dependencies, testing dependencies, entry points etc. Content of setup.py is described in detail in <a href="https://packaging.python.org/distributing/#setup-py">this document</a>.</p>

<h4 id="setupcfg">setup.cfg</h4>

<figure class="highlight"><pre><code class="language-ini" data-lang="ini"><span class="nn">[bumpversion]</span>
<span class="py">current_version</span> <span class="p">=</span> <span class="s">0.0.0</span>
<span class="py">commit</span> <span class="p">=</span> <span class="s">True</span>
<span class="py">tag</span> <span class="p">=</span> <span class="s">True</span>

<span class="nn">[bumpversion:file:setup.py]</span>
<span class="py">search</span> <span class="p">=</span> <span class="s">version='{current_version}'</span>
<span class="py">replace</span> <span class="p">=</span> <span class="s">version='{new_version}'</span>

<span class="nn">[bumpversion:file:src/__init__.py]</span>
<span class="py">search</span> <span class="p">=</span> <span class="s">__version__ = '{current_version}'</span>
<span class="py">replace</span> <span class="p">=</span> <span class="s">__version__ = '{new_version}'</span>

<span class="nn">[bumpversion:file:docs/source/conf.py]</span>
<span class="py">search</span> <span class="p">=</span> <span class="s">version = '{current_version}'</span>
<span class="py">replace</span> <span class="p">=</span> <span class="s">version = '{new_version}'</span>

<span class="nn">[bdist_wheel]</span>
<span class="py">universal</span> <span class="p">=</span> <span class="s">1</span>

<span class="nn">[flake8]</span>
<span class="py">exclude</span> <span class="p">=</span> <span class="s">docs</span>

<span class="nn">[aliases]</span>
<span class="py">test</span><span class="p">=</span><span class="s">pytest</span></code></pre></figure>

<h4 id="setuppy">setup.py</h4>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">codecs</span> <span class="kn">import</span> <span class="nb">open</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="p">(</span><span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span><span class="p">)</span>

<span class="n">here</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>

<span class="c"># Get the long description from the README file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s">'README.md'</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">long_description</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s">'Biostudio'</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s">'0.0.0'</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s">'A PDB python reader'</span><span class="p">,</span>
    <span class="n">long_description</span><span class="o">=</span><span class="n">long_description</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s">'https://gitlab.com/mdyzma/biostudio'</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s">'Michal Dyzma'</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s">'mdyzma@gmail.com'</span><span class="p">,</span>
    <span class="n">license</span><span class="o">=</span><span class="s">'MIT'</span><span class="p">,</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="s">'Development Status :: 3 - Alpha'</span><span class="p">,</span>
        <span class="s">'Intended Audience :: Developers'</span><span class="p">,</span>
        <span class="s">'Topic :: Software Development :: Build Tools'</span><span class="p">,</span>
        <span class="s">'License :: OSI Approved :: MIT License'</span><span class="p">,</span>
        <span class="s">'Programming Language :: Python :: 2'</span><span class="p">,</span>
        <span class="s">'Programming Language :: Python :: 2.7'</span><span class="p">,</span>
        <span class="s">'Programming Language :: Python :: 3'</span><span class="p">,</span>
        <span class="s">'Programming Language :: Python :: 3.5'</span><span class="p">,</span>
        <span class="s">'Programming Language :: Python :: 3.6'</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">keywords</span><span class="o">=</span><span class="s">'pdb editor'</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s">'docs'</span><span class="p">,</span> <span class="s">'tests'</span><span class="p">]),</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">test_suite</span><span class="o">=</span><span class="s">'tests'</span><span class="p">,</span>
    <span class="n">test_require</span><span class="o">=</span><span class="p">[</span><span class="s">'pytest'</span><span class="p">,</span> <span class="s">'pytest-runner'</span><span class="p">,</span> <span class="s">'coverage'</span><span class="p">,</span> <span class="s">'pytest-cov'</span><span class="p">,</span> <span class="s">'pylint'</span><span class="p">],</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[]</span>
<span class="p">)</span></code></pre></figure>

<h4 id="creating-packages">Creating packages</h4>

<p>Binary distribution package may be universal wheel file <code class="highlighter-rouge">.whl</code>, or more traditional package distribution <code class="highlighter-rouge">.tar.gz</code>. They are called artifacts and their creation will be included into <strong>Continuous Integration</strong> pipeline. To build package manually:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">(</span>biostudio<span class="o">)</span> mdyzma@devbox:~/biostudio<span class="nv">$ </span>python setup.py bdist_wheel bdist</code></pre></figure>

<p>Packages are located in <strong><code class="highlighter-rouge">dist/</code></strong> folder.</p>

<h2 id="summary">Summary</h2>

<p>In general, if I omit all listings, status checks and folder navigation, entire work can be enclosed in few commands in terminal. Some of them must be done only once during project preparation, some of them will be repeated with each iteration or task  progress. Here is list of most important commands used so far. I can wrap them up in some shell script i.e <code class="highlighter-rouge">start_script</code>:</p>

<ol>
  <li>Initial steps (only once):</li>
</ol>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/usr/bin/env bash</span>

<span class="c"># Title: start_script</span>
<span class="c"># Author: Michal Dyzma</span>

<span class="c"># create virtual environment</span>
virtualenv biostudio <span class="o">&amp;&amp;</span>
<span class="nb">source </span>activate biostudio <span class="o">&amp;&amp;</span>
pip install -r requirements.txt <span class="o">&amp;&amp;</span>
<span class="c"># clone project from the git repository</span>
<span class="c"># git clone git@gitlab.com:mdyzma/biostudio.git </span>
git remote add origin git@gitlab.com:mdyzma/biostudio.git

<span class="c"># ----------------------------------------------</span>
<span class="c"># Following steps are optional and depend on the fact if I am creator of the project</span>
mkdir -p biostudio/<span class="o">{</span>docs,src/<span class="o">{</span>common,fileandler/pdb,functional<span class="o">}</span>,tests/<span class="o">{</span>common,filehandler/pdb,functional<span class="o">}</span>,uml<span class="o">}</span> <span class="o">&amp;&amp;</span>
<span class="nb">cd </span>biostudio/ <span class="o">&amp;&amp;</span>  touch README.md LICENSE setup.py setup.cfg tox.ini
find src -type d -exec touch <span class="o">{}</span>/__init__.py <span class="se">\;</span> <span class="o">&amp;&amp;</span>
find tests -type d -exec touch <span class="o">{}</span>/.gitkeep <span class="se">\;</span> <span class="o">&amp;&amp;</span>
<span class="c"># ----------------------------------------------</span>

<span class="nb">cd </span>docs <span class="o">&amp;&amp;</span> sphinx-quickstart</code></pre></figure>

<ol>
  <li>Used frequently every day when work progress will be saved and checked for consistency:</li>
</ol>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git add &lt;filename&gt;
git commit -m <span class="s2">"Message"</span>
bumpversion patch <span class="c">#or minor / major</span>
git tag -a v -m <span class="s2">"This is my "</span>
git push origin master</code></pre></figure>

<ol>
  <li>Occasionally to build package, update documentation or check code metrics</li>
</ol>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pylint src
python -m pytest --cov<span class="o">=</span>src tests/
<span class="nb">cd </span>docs <span class="o">&amp;&amp;</span>  make html

python setup.py bdist bdist_wheel</code></pre></figure>

<p>If I add my source code to the system path by executing <code class="highlighter-rouge">pip instal -e .</code> I will not have to proceed <code class="highlighter-rouge">pytest</code> or  <code class="highlighter-rouge">coverage</code> with <code class="highlighter-rouge">python -m</code> command.</p>

<p>This is the essence of entire post. Each command in this three points forms single brick building entire application. Although it is not a problem to execute this commands every time I need them, it may be very confusing if this approach was adopted by entire team. Imagine each developer using different versions of the code, different test coverage and different stage of documentation production. All this must be combined somehow in common code repository, so everyone can pull current most up-to-date software and start to work on it. Also their local changes should update repository for everyone else.</p>

<p>In addition I will need several different virtual environments to test developed package with different Python versions. At least 3 or 4 for Python 3.X and maybe two for Python 2.6 and 2.7. Then I must install all production dependencies in every environment… Dependencies shouldn’t change between iterations. System grows quickly and becomes very hard to maintain across development team. I will follow Raymond Hettinger’s words, Python core developer, very talented speaker:</p>

<blockquote>
  <p>There must be a better way</p>
</blockquote>

<p>And there is. In next part I will focus on setting logical pipeline out of my building blocks and ensure each team member has access to the same pool of tests, dependencies etc. If you are interested how to integrate  Continuous Integration and Continuous Deployment into your workflow please check <a href="http://localhost:4000/2017/06/24/part3-biostudio-automate-everything/">Part 3: Automate everything</a>.</p>

<p><strong>If you have any comments, or ideas how to improve this tutorial, please let me know by leaving a post below, or contacting me via email.</strong></p>

<!-- Links -->
<!-- www -->


  </div>
<div class="container">
    <div class="row ">
        <div class="col-xs-2"></div>
        <div class="col-xs-8">

        <!-- Twitter -->
        <a href="https://twitter.com/share" class="twitter-share-button" data-via="MichalDyzma">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

        <!-- Google + -->
        <div class="g-plus" data-action="share" data-annotation="bubble"></div>
        <script src="https://apis.google.com/js/platform.js" async defer></script>

        <!-- Facebook -->
        <div class="fb-share-button" data-href="http://localhost:4000/2017/05/28/part2-biostudio-setting-up-environment/" data-layout="button_count" data-size="small" data-mobile-iframe="true" style="position: relative; top: -8px;"></div>


        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/pl_PL/sdk.js#xfbml=1&version=v2.9&appId=422251294815916";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

    </div>
    </div>
    <div class="col-xs-2"></div>
</div>


<div id="disqus_thread"></div>
    <script type="text/javascript">

        var disqus_config = function () {
            this.page.url = "http://localhost:4000/2017/05/28/part2-biostudio-setting-up-environment/";
            this.page.identifier = "/2017/05/28/part2-biostudio-setting-up-environment";
        };
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'md-blog';
        var disqus_developer = 1; // Comment out when the site is live

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var d = document, s = d.createElement('script');
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript"></noscript>


</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy; Michal Dyzma - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="http://localhost:4000/feed.xml">RSS</a>


<!-- mathjax -->



<!-- Bootstrap core JavaScript
================================================== -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


    </p>

  </div>

</footer>


  </body>

</html>
